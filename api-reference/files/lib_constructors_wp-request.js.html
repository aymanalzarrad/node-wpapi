<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>lib/constructors/wp-request.js - wpapi</title>
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="../assets/vendor/yui-min.js"></script>
</head>
<body>

<div id="doc">
    <header class="main-header">
        <div class="content">
            <div class="project-title">
                    <h1 class="project-name">wpapi</h1> <span class="project-version">1.0.2</span>
                    <p class="description">An isomorphic JavaScript client for interacting with the WordPress REST API</p>
            </div>
            <ul class="jump-links">
                <li><a href="#index" class="index-jump-link">index</a></li>
                <li><a href="#top" class="top-jump-link">top</a></li>
            </ul>
        </div>
    </header>
    <div id="bd" class="main-body">

        <div id="docs-sidebar" class="sidebar apidocs">
            <div id="api-list">
                <div id="api-tabview" class="tabview">
                    <ul class="tabs">
                        <li><a href="#api-classes">Classes</a></li>
                        <li><a href="#api-modules">Modules</a></li>
                    </ul>
            
                    <div id="api-tabview-filter">
                        <input type="search" id="api-filter" placeholder="Type to filter APIs">
                    </div>
            
                    <div id="api-tabview-panel">
                        <ul id="api-classes" class="apis classes">
                            <li><a class="type" href="../classes/WPAPI.html">WPAPI</a></li>
                            <li><a class="type" href="../classes/WPRequest.html">WPRequest</a></li>
                        </ul>
            
                        <ul id="api-modules" class="apis modules">
                            <li><a class="module" href="../modules/autodiscovery.html">autodiscovery</a></li>
                            <li><a class="module" href="../modules/filters.html">filters</a></li>
                            <li><a class="module" href="../modules/http-transport.html">http-transport</a></li>
                            <li><a class="module" href="../modules/object-reduce.html">object-reduce</a></li>
                            <li><a class="module" href="../modules/parseRouteString.html">parseRouteString</a></li>
                            <li><a class="module" href="../modules/WPAPI.html">WPAPI</a></li>
                            <li><a class="module" href="../modules/WPRequest.html">WPRequest</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div id="docs-main" class="apidocs">
            <div class="content container">
                <h1 class="file-heading">File: lib/constructors/wp-request.js</h1>
                
                <div class="file">
                    <pre class="code prettyprint linenums">
                &#x27;use strict&#x27;;
                /**
                 * @module WPAPI
                 * @submodule WPRequest
                 */
                
                var qs = require( &#x27;qs&#x27; );
                var _unique = require( &#x27;lodash.uniq&#x27; );
                var extend = require( &#x27;node.extend&#x27; );
                
                var alphaNumericSort = require( &#x27;../util/alphanumeric-sort&#x27; );
                var keyValToObj = require( &#x27;../util/key-val-to-obj&#x27; );
                var paramSetter = require( &#x27;../util/parameter-setter&#x27; );
                var objectReduce = require( &#x27;../util/object-reduce&#x27; );
                
                /**
                 * WPRequest is the base API request object constructor
                 *
                 * @class WPRequest
                 * @constructor
                 * @param {Object} options A hash of options for the WPRequest instance
                 * @param {String} options.endpoint The endpoint URI for the invoking WPAPI instance
                 * @param {Object} options.transport An object of http transport methods (get, post, etc)
                 * @param {String} [options.username] A username for authenticating API requests
                 * @param {String} [options.password] A password for authenticating API requests
                 * @param {String} [options.nonce] A WP nonce for use with cookie authentication
                 */
                function WPRequest( options ) {
                	/**
                	 * Configuration options for the request
                	 *
                	 * @property _options
                	 * @type Object
                	 * @private
                	 * @default {}
                	 */
                	this._options = [
                		// Whitelisted options keys
                		&#x27;auth&#x27;,
                		&#x27;endpoint&#x27;,
                		&#x27;username&#x27;,
                		&#x27;password&#x27;,
                		&#x27;nonce&#x27;
                	].reduce(function( localOptions, key ) {
                		if ( options &amp;&amp; options[ key ] ) {
                			localOptions[ key ] = options[ key ];
                		}
                		return localOptions;
                	}, {});
                
                	/**
                	 * The HTTP transport methods (.get, .post, .put, .delete, .head) to use for this request
                	 *
                	 * @property transport
                	 * @type {Object}
                	 * @private
                	 */
                	this.transport = options &amp;&amp; options.transport;
                
                	/**
                	 * A hash of query parameters
                	 * This is used to store the values for supported query parameters like ?_embed
                	 *
                	 * @property _params
                	 * @type Object
                	 * @private
                	 * @default {}
                	 */
                	this._params = {};
                
                	/**
                	 * Methods supported by this API request instance:
                	 * Individual endpoint handlers specify their own subset of supported methods
                	 *
                	 * @property _supportedMethods
                	 * @type Array
                	 * @private
                	 * @default [ &#x27;head&#x27;, &#x27;get&#x27;, &#x27;put&#x27;, &#x27;post&#x27;, &#x27;delete&#x27; ]
                	 */
                	this._supportedMethods = [ &#x27;head&#x27;, &#x27;get&#x27;, &#x27;put&#x27;, &#x27;post&#x27;, &#x27;delete&#x27; ];
                
                	/**
                	 * A hash of values to assemble into the API request path
                	 * (This will be overwritten by each specific endpoint handler constructor)
                	 *
                	 * @property _path
                	 * @type Object
                	 * @private
                	 * @default {}
                	 */
                	this._path = {};
                }
                
                // Private helper methods
                // ======================
                
                /** Identity function for use within invokeAndPromisify() */
                function identity( value ) {
                	return value;
                }
                
                /**
                 * Process arrays of taxonomy terms into query parameters.
                 * All terms listed in the arrays will be required (AND behavior).
                 *
                 * This method will not be called with any values unless we are handling
                 * an endpoint with the filter mixin; however, since parameter handling
                 * (and therefore &#x60;_renderQuery()&#x60;) are part of WPRequest itself, this
                 * helper method lives here alongside the code where it is used.
                 *
                 * @example
                 *     prepareTaxonomies({
                 *         tag: [ &#x27;tag1 &#x27;, &#x27;tag2&#x27; ], // by term slug
                 *         cat: [ 7 ] // by term ID
                 *     }) === {
                 *         tag: &#x27;tag1+tag2&#x27;,
                 *         cat: &#x27;7&#x27;
                 *     }
                 *
                 * @param {Object} taxonomyFilters An object of taxonomy term arrays, keyed by taxonomy name
                 * @return {Object} An object of prepareFilters-ready query arg and query param value pairs
                 */
                function prepareTaxonomies( taxonomyFilters ) {
                	if ( ! taxonomyFilters ) {
                		return {};
                	}
                
                	return objectReduce( taxonomyFilters, function( result, terms, key ) {
                		// Trim whitespace and concatenate multiple terms with +
                		result[ key ] = terms.map(function( term ) {
                			// Coerce term into a string so that trim() won&#x27;t fail
                			return ( term + &#x27;&#x27; ).trim().toLowerCase();
                		}).join( &#x27;+&#x27; );
                
                		return result;
                	}, {});
                }
                
                /**
                 * Return an object with any properties with undefined, null or empty string
                 * values removed.
                 *
                 * @example
                 *
                 *     populated({
                 *       a: &#x27;a&#x27;,
                 *       b: &#x27;&#x27;,
                 *       c: null
                 *     }); // { a: &#x27;a&#x27; }
                 *
                 * @param  {Object} obj An object of key/value pairs
                 * @return {Object}     That object with all empty values removed
                 */
                function populated( obj ) {
                	if ( ! obj ) {
                		return obj;
                	}
                	return objectReduce( obj, function( values, val, key ) {
                		if ( val !== undefined &amp;&amp; val !== null &amp;&amp; val !== &#x27;&#x27; ) {
                			values[ key ] = val;
                		}
                		return values;
                	}, {});
                }
                
                /**
                 * Assert whether a provided URL component is &quot;valid&quot; by checking it against
                 * an array of registered path component validator methods for that level of
                 * the URL path.
                 *
                 * @param {object[]} levelDefinitions An array of Level Definition objects
                 * @param {string}   levelContents    The URL path string that has been specified
                 *                                    for use on the provided level
                 * @returns {boolean} Whether the provided input matches any of the provided
                 * level validation functions
                 */
                function validatePathLevel( levelDefinitions, levelContents ) {
                	// One &quot;level&quot; may have multiple options, as a route tree is a branching
                	// structure. We consider a level &quot;valid&quot; if the provided levelContents
                	// match any of the available validators.
                	var valid = levelDefinitions.reduce(function( anyOptionValid, levelOption ) {
                		if ( ! levelOption.validate ) {
                			// If there is no validator function, the level is implicitly valid
                			return true;
                		}
                		return anyOptionValid || levelOption.validate( levelContents );
                	}, false );
                
                	if ( ! valid ) {
                		throw new Error([
                			&#x27;Invalid path component:&#x27;,
                			levelContents,
                			// awkward pluralization support:
                			&#x27;does not match&#x27; + ( levelDefinitions.length &gt; 1 ? &#x27; any of&#x27; : &#x27;&#x27; ),
                			levelDefinitions.reduce(function( components, levelOption ) {
                				return components.concat( levelOption.component );
                			}, [] ).join( &#x27;, &#x27; )
                		].join( &#x27; &#x27; ) );
                	}
                }
                
                // (Semi-)Private Prototype Methods
                // ================================
                
                /**
                 * Process the endpoint query&#x27;s filter objects into a valid query string.
                 * Nested objects and Array properties are rendered with indexed array syntax.
                 *
                 * @example
                 *     _renderQuery({ p1: &#x27;val1&#x27;, p2: &#x27;val2&#x27; });  // ?p1=val1&amp;p2=val2
                 *     _renderQuery({ obj: { prop: &#x27;val&#x27; } });    // ?obj[prop]=val
                 *     _renderQuery({ arr: [ &#x27;val1&#x27;, &#x27;val2&#x27; ] }); // ?arr[0]=val1&amp;arr[1]=val2
                 *
                 * @private
                 *
                 * @method _renderQuery
                 * @return {String} A query string representing the specified filter parameters
                 */
                WPRequest.prototype._renderQuery = function() {
                	// Build the full query parameters object
                	var queryParams = extend( {}, populated( this._params ) );
                
                	// Prepare any taxonomies and merge with other filter values
                	var taxonomies = prepareTaxonomies( this._taxonomyFilters );
                	queryParams.filter = extend( {}, populated( this._filters ), taxonomies );
                
                	// Parse query parameters object into a query string, sorting the object
                	// properties by alphabetical order (consistent property ordering can make
                	// for easier caching of request URIs)
                	var queryString = qs.stringify( queryParams, { arrayFormat: &#x27;brackets&#x27; } )
                		.split( &#x27;&amp;&#x27; )
                		.sort()
                		.join( &#x27;&amp;&#x27; );
                
                	// Check if the endpoint contains a previous query and set the query character accordingly.
                	var queryCharacter = /\?/.test( this._options.endpoint ) ? &#x27;&amp;&#x27; : &#x27;?&#x27;;
                
                	// Prepend a &quot;?&quot; (or a &quot;&amp;&quot;) if a query is present, and return.
                	return ( queryString === &#x27;&#x27; ) ? &#x27;&#x27; : queryCharacter + queryString;
                };
                
                /**
                 * Validate &amp; assemble a path string from the request object&#x27;s _path
                 *
                 * @private
                 *
                 * @method _renderPath
                 * @return {String} The rendered path
                 */
                WPRequest.prototype._renderPath = function() {
                	// Call validatePath: if the provided path components are not well-formed,
                	// an error will be thrown
                	this.validatePath();
                
                	var pathParts = this._path;
                	var orderedPathParts = Object.keys( pathParts )
                		.sort(function( a, b ) {
                			var intA = parseInt( a, 10 );
                			var intB = parseInt( b, 10 );
                			return intA - intB;
                		})
                		.map(function( pathPartKey ) {
                			return pathParts[ pathPartKey ];
                		});
                
                	// Combine all parts of the path together, filtered to omit any components
                	// that are unspecified or empty strings, to create the full path template
                	var path = [
                		this._namespace
                	].concat( orderedPathParts ).filter( identity ).join( &#x27;/&#x27; );
                
                	return path;
                };
                
                // Public Prototype Methods
                // ========================
                
                /**
                 * Parse the request into a WordPress API request URI string
                 *
                 * @method toString
                 * @return {String} The URI for the HTTP request to be sent
                 */
                WPRequest.prototype.toString = function() {
                	// Render the path to a string
                	var path = this._renderPath();
                
                	// Render the query string
                	var queryStr = this._renderQuery();
                
                	return this._options.endpoint + path + queryStr;
                };
                
                /**
                 * Set a component of the resource URL itself (as opposed to a query parameter)
                 *
                 * If a path component has already been set at this level, throw an error:
                 * requests are meant to be transient, so any re-writing of a previously-set
                 * path part value is likely to be a mistake.
                 *
                 * @method setPathPart
                 * @chainable
                 * @param {Number|String} level A &quot;level&quot; of the path to set, e.g. &quot;1&quot; or &quot;2&quot;
                 * @param {Number|String} val   The value to set at that path part level
                 * @return {WPRequest} The WPRequest instance (for chaining)
                 */
                WPRequest.prototype.setPathPart = function( level, val ) {
                	if ( this._path[ level ] ) {
                		throw new Error( &#x27;Cannot overwrite value &#x27; + this._path[ level ] );
                	}
                	this._path[ level ] = val;
                
                	return this;
                };
                
                /**
                 * Validate whether the specified path parts are valid for this endpoint
                 *
                 * &quot;Path parts&quot; are non-query-string URL segments, like &quot;some&quot; &quot;path&quot; in the URL
                 * &#x60;mydomain.com/some/path?and=a&amp;query=string&amp;too&#x60;. Because a well-formed path
                 * is necessary to execute a successful API request, we throw an error if the
                 * user has omitted a value (such as &#x60;/some/[missing component]/url&#x60;) or has
                 * provided a path part value that does not match the regular expression the
                 * API uses to goven that segment.
                 *
                 * @method validatePath
                 * @chainable
                 * @returns {WPRequest} The WPRequest instance (for chaining), if no errors were found
                 */
                WPRequest.prototype.validatePath = function() {
                	// Iterate through all _specified_ levels of this endpoint
                	var specifiedLevels = Object.keys( this._path )
                		.map(function( level ) {
                			return parseInt( level, 10 );
                		})
                		.filter(function( pathPartKey ) {
                			return ! isNaN( pathPartKey );
                		});
                
                	var maxLevel = Math.max.apply( null, specifiedLevels );
                
                	// Ensure that all necessary levels are specified
                	var path = [];
                	var valid = true;
                
                	for ( var level = 0; level &lt;= maxLevel; level++ ) {
                
                		if ( ! this._levels || ! this._levels[ level ] ) {
                			continue;
                		}
                
                		if ( this._path[ level ] ) {
                			// Validate the provided path level against all available path validators
                			validatePathLevel( this._levels[ level ], this._path[ level ] );
                
                			// Add the path value to the array
                			path.push( this._path[ level ] );
                		} else {
                			path.push( &#x27; ??? &#x27; );
                			valid = false;
                		}
                	}
                
                	if ( ! valid ) {
                		throw new Error( &#x27;Incomplete URL! Missing component: /&#x27; + path.join( &#x27;/&#x27; ) );
                	}
                
                	return this;
                };
                
                /**
                 * Set a parameter to render into the final query URI.
                 *
                 * @method param
                 * @chainable
                 * @param {String|Object} props The name of the parameter to set, or an object containing
                 *                              parameter keys and their corresponding values
                 * @param {String|Number|Array} [value] The value of the parameter being set
                 * @return {WPRequest} The WPRequest instance (for chaining)
                 */
                WPRequest.prototype.param = function( props, value ) {
                	if ( ! props || typeof props === &#x27;string&#x27; &amp;&amp; value === undefined ) {
                		// We have no property to set, or no value to set for that property
                		return this;
                	}
                
                	// We can use the same iterator function below to handle explicit key-value
                	// pairs if we convert them into to an object we can iterate over:
                	if ( typeof props === &#x27;string&#x27; ) {
                		props = keyValToObj( props, value );
                	}
                
                	// Iterate through the properties
                	Object.keys( props ).forEach(function( key ) {
                		var value = props[ key ];
                
                		// Arrays should be de-duped and sorted
                		if ( Array.isArray( value ) ) {
                			value = _unique( value ).sort( alphaNumericSort );
                		}
                
                		// Set the value
                		this._params[ key ] = value;
                	}.bind( this ));
                
                	return this;
                };
                
                // Globally-applicable parameters that impact the shape of the request or response
                // ===============================================================================
                
                /**
                 * Set the context of the request. Used primarily to expose private values on a
                 * request object by setting the context to &quot;edit&quot;.
                 *
                 * @method context
                 * @chainable
                 * @param {String} context The context to set on the request
                 * @return {WPRequest} The WPRequest instance (for chaining)
                 */
                WPRequest.prototype.context = paramSetter( &#x27;context&#x27; );
                
                /**
                 * Convenience wrapper for &#x60;.context( &#x27;edit&#x27; )&#x60;
                 *
                 * @method edit
                 * @chainable
                 * @return {WPRequest} The WPRequest instance (for chaining)
                 */
                WPRequest.prototype.edit = function() {
                	return this.context( &#x27;edit&#x27; );
                };
                
                /**
                 * Return embedded resources as part of the response payload.
                 *
                 * @method embed
                 * @chainable
                 * @return {WPRequest} The WPRequest instance (for chaining)
                 */
                WPRequest.prototype.embed = function() {
                	return this.param( &#x27;_embed&#x27;, true );
                };
                
                // Parameters supported by all/nearly all default collections
                // ==========================================================
                
                /**
                 * Set the pagination of a request. Use in conjunction with &#x60;.perPage()&#x60; for explicit
                 * pagination handling. (The number of pages in a response can be retrieved from the
                 * response&#x27;s &#x60;_paging.totalPages&#x60; property.)
                 *
                 * @method page
                 * @chainable
                 * @param {Number} pageNumber The page number of results to retrieve
                 * @return The request instance (for chaining)
                 */
                WPRequest.prototype.page = paramSetter( &#x27;page&#x27; );
                
                /**
                 * Set the number of items to be returned in a page of responses.
                 *
                 * @method perPage
                 * @chainable
                 * @param {Number} itemsPerPage The number of items to return in one page of results
                 * @return The request instance (for chaining)
                 */
                WPRequest.prototype.perPage = paramSetter( &#x27;per_page&#x27; );
                
                /**
                 * Set an arbitrary offset to retrieve items from a specific point in a collection.
                 *
                 * @method offset
                 * @chainable
                 * @param {Number} offsetNumber The number of items by which to offset the response
                 * @return The request instance (for chaining)
                 */
                WPRequest.prototype.offset = paramSetter( &#x27;offset&#x27; );
                
                /**
                 * Change the sort direction of a returned collection
                 *
                 * @example order comments chronologically (oldest first)
                 *
                 *     site.comments().order( &#x27;asc&#x27; )...
                 *
                 * @method order
                 * @chainable
                 * @param {String} direction The order to use when sorting the response
                 * @return The request instance (for chaining)
                 */
                WPRequest.prototype.order = paramSetter( &#x27;order&#x27; );
                
                /**
                 * Order a collection by a specific field
                 *
                 * @method orderby
                 * @chainable
                 * @param {String} field The field by which to order the response
                 * @return The request instance (for chaining)
                 */
                WPRequest.prototype.orderby = paramSetter( &#x27;orderby&#x27; );
                
                /**
                 * Filter results to those matching the specified search terms.
                 *
                 * @method search
                 * @chainable
                 * @param {String} searchString A string to search for within post content
                 * @return The request instance (for chaining)
                 */
                WPRequest.prototype.search = paramSetter( &#x27;search&#x27; );
                
                /**
                 * Include specific resource IDs in the response collection.
                 *
                 * @method include
                 * @chainable
                 * @param {Number|Number[]} ids An ID or array of IDs to include
                 * @return The request instance (for chaining)
                 */
                WPRequest.prototype.include = paramSetter( &#x27;include&#x27; );
                
                /**
                 * Exclude specific resource IDs in the response collection.
                 *
                 * @method exclude
                 * @chainable
                 * @param {Number|Number[]} ids An ID or array of IDs to exclude
                 * @return The request instance (for chaining)
                 */
                WPRequest.prototype.exclude = paramSetter( &#x27;exclude&#x27; );
                
                /**
                 * Query a collection for members with a specific slug.
                 *
                 * @method slug
                 * @chainable
                 * @param {String} slug A post slug (slug), e.g. &quot;hello-world&quot;
                 * @return The request instance (for chaining)
                 */
                WPRequest.prototype.slug = paramSetter( &#x27;slug&#x27; );
                
                // HTTP Transport Prototype Methods
                // ================================
                
                // Chaining methods
                // ================
                
                /**
                 * Set the namespace of the request, e.g. to specify the API root for routes
                 * registered by wp core v2 (&quot;wp/v2&quot;) or by any given plugin. Any previously-
                 * set namespace will be overwritten by subsequent calls to the method.
                 *
                 * @method namespace
                 * @chainable
                 * @param {String} namespace A namespace string, e.g. &quot;wp/v2&quot;
                 * @return {WPRequest} The WPRequest instance (for chaining)
                 */
                WPRequest.prototype.namespace = function( namespace ) {
                	this._namespace = namespace;
                	return this;
                };
                
                /**
                 * Set a request to use authentication, and optionally provide auth credentials
                 *
                 * If auth credentials were already specified when the WPAPI instance was created, calling
                 * &#x60;.auth&#x60; on the request chain will set that request to use the existing credentials:
                 *
                 * @example use existing credentials
                 *
                 *     request.auth().get...
                 *
                 * Alternatively, a username &amp; password (or nonce) can be explicitly passed into &#x60;.auth&#x60;:
                 *
                 * @example use explicit basic authentication credentials
                 *
                 *     request.auth({
                 *       username: &#x27;admin&#x27;,
                 *       password: &#x27;super secure&#x27;
                 *     }).get...
                 *
                 * @example use a nonce for cookie authentication
                 *
                 *     request.auth({
                 *       nonce: &#x27;somenonce&#x27;
                 *     })...
                 *
                 * @method auth
                 * @chainable
                 * @param {Object} credentials            An object with &#x27;username&#x27; and &#x27;password&#x27; string
                 *                                        properties, or else a &#x27;nonce&#x27; property
                 * @param {String} [credentials.username] A WP-API Basic HTTP Authentication username
                 * @param {String} [credentials.password] A WP-API Basic HTTP Authentication password
                 * @param {String} [credentials.nonce]    A WP nonce for use with cookie authentication
                 * @return {WPRequest} The WPRequest instance (for chaining)
                 */
                WPRequest.prototype.auth = function( credentials ) {
                	if ( typeof credentials === &#x27;object&#x27; ) {
                		if ( typeof credentials.username === &#x27;string&#x27; ) {
                			this._options.username = credentials.username;
                		}
                
                		if ( typeof credentials.password === &#x27;string&#x27; ) {
                			this._options.password = credentials.password;
                		}
                
                		if ( credentials.nonce ) {
                			this._options.nonce = credentials.nonce;
                		}
                	}
                
                	// Set the &quot;auth&quot; options flag that will force authentication on this request
                	this._options.auth = true;
                
                	return this;
                };
                
                /**
                 * Specify a file or a file buffer to attach to the request, for use when
                 * creating a new Media item
                 *
                 * @example within a server context
                 *
                 *     wp.media()
                 *       // Pass .file() the file system path to a file to upload
                 *       .file( &#x27;/path/to/file.jpg&#x27; )
                 *       .create({})...
                 *
                 * @example within a browser context
                 *
                 *     wp.media()
                 *       // Pass .file() the file reference from an HTML file input
                 *       .file( document.querySelector( &#x27;input[type=&quot;file&quot;]&#x27; ).files[0] )
                 *       .create({})...
                 *
                 * @method file
                 * @param {string|object} file   A path to a file (in Node) or an file object
                 *                               (Node or Browser) to attach to the request
                 * @param {string}        [name] An (optional) filename to use for the file
                 * @returns {[type]} [description]
                 */
                WPRequest.prototype.file = function( file, name ) {
                	this._attachment = file;
                	// Explicitly set to undefined if not provided, to override any previously-
                	// set attachment name property that might exist from a prior &#x60;.file()&#x60; call
                	this._attachmentName = name ? name : undefined;
                	return this;
                };
                
                // HTTP Methods: Public Interface
                // ==============================
                
                /**
                 * Get (download the data for) the specified resource
                 *
                 * @method get
                 * @async
                 * @param {Function} [callback] A callback to invoke with the results of the GET request
                 * @return {Promise} A promise to the results of the HTTP request
                 */
                WPRequest.prototype.get = function( callback ) {
                	return this.transport.get( this, callback );
                };
                
                /**
                 * Get the headers for the specified resource
                 *
                 * @method headers
                 * @async
                 * @param {Function} [callback] A callback to invoke with the results of the HEAD request
                 * @return {Promise} A promise to the header results of the HTTP request
                 */
                WPRequest.prototype.headers = function( callback ) {
                	return this.transport.head( this, callback );
                };
                
                /**
                 * Create the specified resource with the provided data
                 *
                 * This is the public interface for creating POST requests
                 *
                 * @method create
                 * @async
                 * @param {Object} data The data for the POST request
                 * @param {Function} [callback] A callback to invoke with the results of the POST request
                 * @return {Promise} A promise to the results of the HTTP request
                 */
                WPRequest.prototype.create = function( data, callback ) {
                	return this.transport.post( this, data, callback );
                };
                
                /**
                 * Update the specified resource with the provided data
                 *
                 * This is the public interface for creating PUT requests
                 *
                 * @method update
                 * @async
                 * @private
                 * @param {Object} data The data for the PUT request
                 * @param {Function} [callback] A callback to invoke with the results of the PUT request
                 * @return {Promise} A promise to the results of the HTTP request
                 */
                WPRequest.prototype.update = function( data, callback ) {
                	return this.transport.put( this, data, callback );
                };
                
                /**
                 * Delete the specified resource
                 *
                 * @method delete
                 * @async
                 * @param {Object} [data] Data to send along with the DELETE request
                 * @param {Function} [callback] A callback to invoke with the results of the DELETE request
                 * @return {Promise} A promise to the results of the HTTP request
                 */
                WPRequest.prototype.delete = function( data, callback ) {
                	return this.transport.delete( this, data, callback );
                };
                
                /**
                 * Calling .then on a query chain will invoke the query as a GET and return a promise
                 *
                 * @method then
                 * @async
                 * @param {Function} [successCallback] A callback to handle the data returned from the GET request
                 * @param {Function} [failureCallback] A callback to handle any errors encountered by the request
                 * @return {Promise} A promise to the results of the HTTP request
                 */
                WPRequest.prototype.then = function( successCallback, failureCallback ) {
                	return this.transport.get( this ).then( successCallback, failureCallback );
                };
                
                module.exports = WPRequest;
                
                    </pre>
                </div>
            </div>
        </div>

    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/vendor/jquery.min.js"></script>
<script src="../assets/js/jquery-offscreen-trigger.js"></script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
